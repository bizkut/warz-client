<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Channel information</title><link rel="stylesheet" href="ts3doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="index.html" title="TeamSpeak 3 Server SDK Developer Manual"><link rel="up" href="ar01s11.html" title="Retrieve and store information"><link rel="prev" href="ar01s11.html" title="Retrieve and store information"><link rel="next" href="ar01s11s03.html" title="Server information"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><img id="logo" src="images/logo.png"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Channel information</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s11.html"><img src="images/prev.png" alt="Prev"></a> </td><th width="60%" align="center">Retrieve and store information</th><td width="20%" align="right"> <a accesskey="n" href="ar01s11s03.html"><img src="images/next.png" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="s_channelinfo"></a>Channel information</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="s_channelinfoget"></a>Query channel information</h4></div></div></div><p>Querying and modifying information related to channels is similar to dealing with clients. The parameter <em class="parameter"><code>flag</code></em> is defined by the enum <span class="structname">ChannelProperties</span>. The functions to query channel information are:</p><p>
  </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">unsigned int <b class="fsfunc">ts3server_getChannelVariableAsInt</b>(</code></td><td><var class="pdparam">serverID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">channelID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">flag</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">result</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>uint64 <var class="pdparam">serverID</var></code>;<br><code>uint64 <var class="pdparam">channelID</var></code>;<br><code>ChannelProperties <var class="pdparam">flag</var></code>;<br><code>int* <var class="pdparam">result</var></code>;</div><div class="funcprototype-spacer"> </div></div><p>
  
</p><p>
  </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">unsigned int <b class="fsfunc">ts3server_getChannelVariableAsString</b>(</code></td><td><var class="pdparam">serverID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">channelID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">flag</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">result</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>uint64 <var class="pdparam">serverID</var></code>;<br><code>uint64 <var class="pdparam">channelID</var></code>;<br><code>ChannelProperties <var class="pdparam">flag</var></code>;<br><code>char** <var class="pdparam">result</var></code>;</div><div class="funcprototype-spacer"> </div></div><p>
  
</p><div class="itemizedlist"><p class="title"><b>Parameters</b></p><ul type="disc"><li><p><em class="parameter"><code>serverID</code></em></p><p>ID of the virtual server on which the channel property is queried.</p></li><li><p><em class="parameter"><code>channelID</code></em></p><p>ID of the queried channel.</p></li><li><p><em class="parameter"><code>flag</code></em></p><p>Channel propery to query, see below.</p></li><li><p><em class="parameter"><code>result</code></em></p><p>Address of a variable which receives the result value as int or string, depending on which function is used. In case of a string, memory must be released using <a class="link" href="ar01s14.html#freememory"><code class="function">ts3server_freeMemory</code></a>, unless an error occured.</p></li></ul></div><p>Returns <em class="structfield"><code>ERROR_ok</code></em> on success, otherwise an error code as defined in <code class="filename">public_errors.h</code>. For the string version: If an error has occured, the result string is uninitialized and must not be released.</p><p>The parameter <em class="parameter"><code>flag</code></em> specifies the type of queried information. It is defined by the enum <span class="structname">ChannelProperties</span>:</p><pre class="programlisting">enum ChannelProperties {
  CHANNEL_NAME = 0,             //Available for all channels that are "in view", always up-to-date
  CHANNEL_TOPIC,                //Available for all channels that are "in view", always up-to-date
  CHANNEL_DESCRIPTION,          //Must be requested (=&gt; requestChannelDescription)
  CHANNEL_PASSWORD,             //not available client side
  CHANNEL_CODEC,                //Available for all channels that are "in view", always up-to-date
  CHANNEL_CODEC_QUALITY,        //Available for all channels that are "in view", always up-to-date
  CHANNEL_MAXCLIENTS,           //Available for all channels that are "in view", always up-to-date
  CHANNEL_MAXFAMILYCLIENTS,     //Available for all channels that are "in view", always up-to-date
  CHANNEL_ORDER,                //Available for all channels that are "in view", always up-to-date
  CHANNEL_FLAG_PERMANENT,       //Available for all channels that are "in view", always up-to-date
  CHANNEL_FLAG_SEMI_PERMANENT,  //Available for all channels that are "in view", always up-to-date
  CHANNEL_FLAG_DEFAULT,         //Available for all channels that are "in view", always up-to-date
  CHANNEL_FLAG_PASSWORD,        //Available for all channels that are "in view", always up-to-date
  CHANNEL_CODEC_LATENCY_FACTOR, //Available for all channels that are "in view", always up-to-date
  CHANNEL_CODEC_IS_UNENCRYPTED, //Available for all channels that are "in view", always up-to-date
  CHANNEL_ENDMARKER,
};</pre><div class="itemizedlist"><ul type="disc"><li><p><em class="structfield"><code>CHANNEL_NAME</code></em></p><p>String: Name of the channel.</p></li><li><p><em class="structfield"><code>CHANNEL_TOPIC</code></em></p><p>String: Single-line channel topic.</p></li><li><p><em class="structfield"><code>CHANNEL_DESCRIPTION</code></em></p><p>String: Optional channel description. Can have multiple lines.</p></li><li><p><em class="structfield"><code>CHANNEL_PASSWORD</code></em></p><p>String: Password for password-protected channels.</p><p>If a password is set or removed by modifying this field, <em class="structfield"><code>CHANNEL_FLAG_PASSWORD</code></em> will be automatically adjusted.</p></li><li><p><em class="structfield"><code>CHANNEL_CODEC</code></em></p><p>Int (0-3): Codec used for this channel:</p><div class="itemizedlist"><ul type="circle"><li><p>0 - Speex Narrowband (8 kHz)</p></li><li><p>1 - Speex Wideband (16 kHz)</p></li><li><p>2 - Speex Ultra-Wideband (32 kHz)</p></li></ul></div></li><li><p><em class="structfield"><code>CHANNEL_CODEC_QUALITY</code></em></p><p>Int (0-10): Quality of channel codec of this channel. Valid values range from 0 to 10, default is 7. Higher values result in better speech quality but more bandwidth usage.</p></li><li><p><em class="structfield"><code>CHANNEL_MAXCLIENTS</code></em></p><p>Int: Number of maximum clients who can join this channel.</p></li><li><p><em class="structfield"><code>CHANNEL_MAXFAMILYCLIENTS</code></em></p><p>Int: Number of maximum clients who can join this channel and all subchannels.</p></li><li><p><em class="structfield"><code>CHANNEL_ORDER</code></em></p><p>Int: Defines how channels are sorted in the GUI. Channel order is the ID of the predecessor channel after which this channel is to be sorted. If 0, the channel is sorted at the top of its hirarchy.</p></li><li><p><em class="structfield"><code>CHANNEL_FLAG_PERMANENT</code></em> / <em class="structfield"><code>CHANNEL_FLAG_SEMI_PERMANENT</code></em></p><p>Concerning channel durability, there are three types of channels:</p><div class="itemizedlist"><ul type="circle"><li><p>Temporary</p><p>Temporary channels have neither the <em class="structfield"><code>CHANNEL_FLAG_PERMANENT</code></em> nor <em class="structfield"><code>CHANNEL_FLAG_SEMI_PERMANENT</code></em> flag set. Temporary channels are automatically deleted by the server after the last user has left and the channel is empty. They will not be restored when the server restarts.</p></li><li><p>Semi-permanent</p><p>Semi-permanent channels are not automatically deleted when the last user left but will not be restored when the server restarts.</p></li><li><p>Permanent</p><p>Permanent channels will be restored when the server restarts.</p></li></ul></div></li><li><p><em class="structfield"><code>CHANNEL_FLAG_DEFAULT</code></em></p><p>Int (0/1): Channel is the default channel. There can only be one default channel per server. New users who did not configure a channel to join on login in <code class="function">ts3server_startConnection</code> will automatically join the default channel.</p></li><li><p><em class="structfield"><code>CHANNEL_FLAG_PASSWORD</code></em></p><p>Int (0/1): If set, channel is password protected. The password itself is stored in <em class="structfield"><code>CHANNEL_PASSWORD</code></em>.</p></li><li><p><em class="structfield"><code>CHANNEL_CODEC_LATENCY_FACTOR</code></em></p><p>(Int: 1-10): Latency of this channel. This allows to increase the packet size resulting in less bandwidth usage at the cost of higher latency. A value of 1 (default) is the best setting for lowest latency and best quality. If bandwidth or network quality are restricted, increasing the latency factor can help stabilize the connection. Higher latency values are only possible for low-quality codec and codec quality settings.</p><p>For best voice quality a low latency factor is recommended.</p></li><li><p><em class="structfield"><code>CHANNEL_CODEC_IS_UNENCRYPTED</code></em></p><p>Int (0/1): If 1, this channel is not using encrypted voice data. If 0, voice data is encrypted for this channel. Note that channel voice data encryption can be globally disabled or enabled for the virtual server. Changing this flag makes only sense if global voice data encryption is set to be configured per channel as <em class="structfield"><code>CODEC_ENCRYPTION_PER_CHANNEL</code></em> (the default behaviour).</p></li></ul></div><p>Example 1: Query topic of channel with ID 123:</p><pre class="programlisting">uint64 channelID = 123;  /* Channel ID in our exampel */
char topic;

if(ts3server_getChannelVariableAsString(serverID, channel, CHANNEL_TOPIC, &amp;topic) == ERROR_ok) {
    printf("Topic of channel %u is: %s\n", channelID, topic);
    ts3server_freeMemory(topic);
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="s_channelinfoset"></a>Setting channel information</h4></div></div></div><p>Channel properties can be modified with:</p><p>
  <a name="setchannelvarasint"></a>
  </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">unsigned int <b class="fsfunc">ts3server_setChannelVariableAsInt</b>(</code></td><td><var class="pdparam">serverID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">channelID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">flag</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">value</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>uint64 <var class="pdparam">serverID</var></code>;<br><code>uint64 <var class="pdparam">channelID</var></code>;<br><code>ChannelProperties <var class="pdparam">flag</var></code>;<br><code>int <var class="pdparam">value</var></code>;</div><div class="funcprototype-spacer"> </div></div><p>
  
</p><p>
  <a name="setchannelvarasstring"></a>
  </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">unsigned int <b class="fsfunc">ts3server_setChannelVariableAsString</b>(</code></td><td><var class="pdparam">serverID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">channelID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">flag</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">value</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>uint64 <var class="pdparam">serverID</var></code>;<br><code>uint64 <var class="pdparam">channelID</var></code>;<br><code>ChannelProperties <var class="pdparam">flag</var></code>;<br><code>const char* <var class="pdparam">value</var></code>;</div><div class="funcprototype-spacer"> </div></div><p>
  
</p><div class="itemizedlist"><p class="title"><b>Parameters</b></p><ul type="disc"><li><p><em class="parameter"><code>serverConnectionHandlerID</code></em></p><p>ID of the virtual server on which the information for the specified channel should be changed.</p></li><li><p><em class="parameter"><code>channelID</code></em></p><p>ID of the channel whoses property should be changed.</p></li><li><p><em class="parameter"><code>flag</code></em></p><p>Channel  propery to change, see above.</p></li><li><p><em class="parameter"><code>value</code></em></p><p>Value the channel property should be changed to.</p></li></ul></div><p>Returns <em class="structfield"><code>ERROR_ok</code></em> on success, otherwise an error code as defined in <code class="filename">public_errors.h</code>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>After modifying one or more channel variables, you <span class="emphasis"><em>must</em></span> flush the changes.</p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">unsigned int <b class="fsfunc">ts3server_flushChannelVariable</b>(</code></td><td><var class="pdparam">serverID</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">channelID</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>uint64 <var class="pdparam">serverID</var></code>;<br><code>uint64 <var class="pdparam">channelID</var></code>;</div><div class="funcprototype-spacer"> </div></div></td></tr></table></div><p>Example: Change the channel name and topic:</p><pre class="programlisting">/* Modify channel name */
if(ts3server_setChannelVariableAsString(serverID, channelID, CHANNEL_NAME,  "New channel name") != ERROR_ok) {
    printf("Error setting channel name\n");
}

/* Modify channel topic */
if(ts3server_setChannelVariableAsString(serverID, channelID, CHANNEL_TOPIC, "New channel topic") != ERROR_ok) {
    printf("Error setting channel topic\n");
}

/* Flush changes */
if(ts3server_flushChannelVariable(serverID, channelID) != ERROR_ok) {
    printf("Error flushing channel variable\n");
}</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s11.html"><img src="images/prev.png" alt="Prev"></a> </td><td width="20%" align="center"><a accesskey="u" href="ar01s11.html"><img src="images/up.png" alt="Up"></a></td><td width="40%" align="right"> <a accesskey="n" href="ar01s11s03.html"><img src="images/next.png" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Retrieve and store information </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a></td><td width="40%" align="right" valign="top"> Server information</td></tr></table></div></body></html>
